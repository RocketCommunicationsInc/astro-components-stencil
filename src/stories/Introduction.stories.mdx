import { Meta } from '@storybook/addon-docs/blocks'
import Code from './assets/code-brackets.svg'
import Colors from './assets/colors.svg'
import Comments from './assets/comments.svg'
import Direction from './assets/direction.svg'
import Flow from './assets/flow.svg'
import Plugin from './assets/plugin.svg'
import Repo from './assets/repo.svg'
import StackAlt from './assets/stackalt.svg'

<Meta title="AstroUXDS/Installation" />

# Installation

## Quick Start

To get up and running quickly, Astro web components are available via a CDN. Add the following to your `<head>`

```html
<link rel="preconnect" href="https://fonts.gstatic.com" />
<link
    href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&family=Roboto:wght@200;300;400;500;600;800&display=swap"
    rel="stylesheet"
/>
<script src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic.js"></script>
<link rel="stylesheet" href="/build/astro-web-components.css" />
```

and you can start using all of Astro's components immediately in the browser.

### Static HTML

1. Install with npm

```
npm i @astrouxds/astro-web-components
```

```html
<link rel="preconnect" href="https://fonts.gstatic.com" />
<link
    href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&family=Roboto:wght@200;300;400;500;600;800&display=swap"
    rel="stylesheet"
/>
<link
    rel="stylesheet"
    href="/node_modules/astro-web-components/astro-web-components.css"
/>
<script type="module">
    import { defineCustomElements } from '/node_modules/astro-web-components/loader'
    defineCustomElements()
</script>
```

### Framework Integrations

1. Install
   `npm i @astrouxds/astro-web-components`

2. Import Astro's Assets

```html
<link rel="preconnect" href="https://fonts.gstatic.com" />
<link
    href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&family=Roboto:wght@200;300;400;500;600;800&display=swap"
    rel="stylesheet"
/>
<link rel="stylesheet" href="/build/astro-web-components.css" />
```

Astro includes a basic global style sheet for things like basic typography. [Roboto](https://fonts.google.com/specimen/Roboto) is used for the font.
We recommend using Google's CDN; however, you can also pull down and serve your own copy of the font.

3. Bootstrap Your Application

#### Generic Framework

```js
import {
    applyPolyfills,
    defineCustomElements,
} from 'astro-web-components/loader'

applyPolyfills().then(() => {
    defineCustomElements()
})
```

#### Vue

```
import Vue from 'vue';
import App from './App.vue';

import { applyPolyfills, defineCustomElements } from 'astro-web-components/loader';

Vue.config.productionTip = false;

// Tell Vue to ignore all components defined in the astro-web-components package
Vue.config.ignoredElements = [/rux-\w*/];

// Bind the custom elements to the window object
applyPolyfills().then(() => {
  defineCustomElements();
});

new Vue({
  render: h => h(App)
}).$mount('#app');
```

#### Angular

1. Include `CUSTOM_ELEMENTS_SCHEMA` in any module that uses an Astro component.

```
import { BrowserModule } from '@angular/platform-browser';
import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';
import { FormsModule } from '@angular/forms';

import { AppComponent } from './app.component';

@NgModule({
  declarations: [AppComponent],
  imports: [BrowserModule, FormsModule],
  bootstrap: [AppComponent],
  schemas: [CUSTOM_ELEMENTS_SCHEMA],
})
export class AppModule {}
```

2. Define your Custom Elements in main.ts

```
import { enableProdMode } from '@angular/core';
import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';

import { AppModule } from './app/app.module';
import { environment } from './environments/environment';

// Note: loader import location set using "esmLoaderPath" within the output target config
import { defineCustomElements } from 'astro-web-components/loader';

if (environment.production) {
  enableProdMode();
}

platformBrowserDynamic().bootstrapModule(AppModule)
  .catch(err => console.log(err));
defineCustomElements();
```

#### React

```
import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import App from './App';
import registerServiceWorker from './registerServiceWorker';

// test-component is the name of our made up Web Component that we have
// published to npm:
import { applyPolyfills, defineCustomElements } from 'astro-web-components/loader';

ReactDOM.render(<App />, document.getElementById('root'));
registerServiceWorker();

applyPolyfills().then(() => {
  defineCustomElements();
});
```

### Treeshaking + Bundlers

Astro ships with a convienent lazy-loader, but if you'd rather more control over your build process and are using an existing bundler
that supports treeshaking, you can also cherry-pick only the components you actually use. For example:

```
import { RuxClock } from 'astro-web-components/dist/components/rux-clock'
customElements.define('rux-clock', RuxClock)
```

NOTE: You will need to manually call `customElements.define` for every component you wish to use and their dependencies.
Refer to each component's documentation to see their dependencies at a glance.
