import { extractArgTypes } from '@astrouxds/storybook-addon-docs-stencil'
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks'
import { html, render } from 'lit-html'
const args = extractArgTypes('rux-icon')
import ruxIconsJson from './rux-icons.json'

<Meta
    title="Components/Icons"
    component="rux-icon"
    argTypes={args}
/>


# Icon

Display icons used in the Astro Design System

## Guidelines

-   [Astro UXDS: Icons and Symbols](https://astrouxds.com/ui-components/icons-and-symbols)

export const Default = (args) => {
  return html`
    <rux-icon
      icon="${args.icon}"
      .color="${args.color}"
      .size="${args.size}"
      .label="${args.label}"
    ></rux-icon>
  `
}

<Canvas>
    <Story
        args={{
          icon: "satellite-transmit",
          size: "normal"
        }}
        parameters={{
            docs: { source: { code: '<rux-icon size="normal" icon="satellite-transmit"></rux-icon>' } },
        }}
        name="Default"
    >
        {Default.bind()}
    </Story>
</Canvas>

## API

<ArgsTable of="rux-icon"/>

## Usage

### Customizing the Color

#### Via the Color Property

The `color` property accepts any valid color (hex, rgba, name, etc):

```
<rux-icon icon="settings" color="#FFF"></rux-icon>
<rux-icon icon="settings" color="rgb(255, 255, 255)"></rux-icon>
<rux-icon icon="settings" color="white"></rux-icon>
```

#### Via CSS

You can also use the CSS `fill` property:

```
  <rux-icon icon="settings" style="fill: #FFF;"></rux-icon>
```

**NOTE:** If you are using CSS to style the color, make sure to omit the `color` property on the component as this has a higher specificity and will override your CSS style.

### Customizing the Size

#### Via the Size Property

The `size` property includes several pre-defined sizes for ease of use:
```
<rux-icon icon="settings" size="extra-small"></rux-icon>
<rux-icon icon="settings" size="small"></rux-icon>
<rux-icon icon="settings" size="normal"></rux-icon>
<rux-icon icon="settings" size="large"></rux-icon>
```

It also accepts any custom size attribute. For example:
```
<rux-icon icon="settings" size="1rem"></rux-icon>
<rux-icon icon="settings" size="20px"></rux-icon>
```

#### Via CSS

You can also manually set the `width` and `height` using CSS.
```
<rux-icon icon="settings" width="1rem" height="1rem"></rux-icon>
```

**NOTE:** Styling via CSS will override the component's `size` property if set.

## All Icons

export const AllIcons = (args) => {
  const capitalize = (s) => {
    if (typeof s !== "string") return "";
    return s.charAt(0).toUpperCase() + s.slice(1);
  };
  const displaySection = (section) => {
    return html`
      <div class="icon__section">
        <h3>${capitalize(section)}</h3>
        <ul class="icon__list">
          ${ruxIconsJson["solid"][section].map((icon) => {
            return html`
              <li class="icon__list-item" title="${icon.icon}">
                <rux-icon
                  icon="${icon.icon}"
                  color="${args.color}"
                  size="${args.size}"
                ></rux-icon>
                <div class="icon__name">${icon.icon}</div>
              </li>
            `;
          })}
        </ul>
      </div>
    `;
  };
  return html`
    <style>
      .icon__wrapper {
        margin: 3rem 4rem;
        text-align: center;
      }
      .icon__list {
        list-style: none;
        margin: 1rem -1rem;
        padding: 0;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
      }
      .icon__list-item {
        padding: 1rem;
      }
      .icon__list-item .rux-icon {
        width: ${args.size};
        height: ${args.size};
        background-color: ${args.color};
      }
      .icon__section {
        margin: 1rem 0 2rem;
      }
      .icon__section h3 {
        text-align: left;
        position: relative;
        font-size: 1.5rem;
        font-weight: 600;
      }
      .icon__section h3:after {
        content: "";
        position: absolute;
        left: 0px;
        bottom: -1rem;
        display: block;
        width: 100%;
        height: 1px;
        background-color: #fff;
      }
      .icon__name {
        display: block;
        margin-top: 0.5rem;
        font-size: 0.75rem;
        width: 5rem;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
        width: calc(${args.size} + 1rem);
      }
    </style>
    <div class="icon__wrapper">
      ${displaySection("astro")}
      ${Object.keys(ruxIconsJson["solid"]).map((section) =>
        section !== "astro" ? displaySection(section) : null
      )}
    </div>
  `;
}

<Canvas>
    <Story
        args={{
          size: 'normal',
        }}
        name="All Icons"
    >
        {AllIcons.bind()}
    </Story>
</Canvas>

### Cherry Picking

When cherry picking icons, you'll need to register both RuxIcon and any individual icons you wish to use.
For example, if you wanted to use `rux-icon-close` you would import the following:

```js
import { RuxIcon } from '@astrouxds/astro-web-components/dist/components/rux-icon'
import { RuxIconClose } from '@astrouxds/astro-web-components/dist/components/rux-icon-close'
customElements.define('rux-icon', RuxIcon)
customElements.define('rux-icon-close', RuxIconClose)
```
